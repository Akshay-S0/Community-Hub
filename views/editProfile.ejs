<%- include('partials/header') %>

<div class="page-container" style="padding: 2rem 0;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="content-card">
          <div class="card-header text-center">
            <div class="card-title d-flex align-items-center justify-content-center">
              <i class="fas fa-user-edit me-2" style="color: #6366f1;"></i>
              <span>Edit Profile</span>
            </div>
            <p class="card-description mb-0">Update your personal information</p>
          </div>
          
          <form action="/editProfile" method="POST" class="modern-form">
            <!-- Personal Information -->
            <div class="mb-4">
              <h6 class="text-muted mb-3">
                <i class="fas fa-user me-2"></i>Personal Information
              </h6>
              
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="form-label" for="firstName">
                      <i class="fas fa-user me-2"></i>First Name
                    </label>
                    <input name="firstName" type="text" id="firstName" class="form-control modern-input" 
                           value="<%= resident.firstName %>" required autofocus>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="form-label" for="lastName">
                      <i class="fas fa-user me-2"></i>Last Name
                    </label>
                    <input name="lastName" type="text" id="lastName" class="form-control modern-input" 
                           value="<%= resident.lastName %>" required>
                  </div>
                </div>
              </div>
              
              <div class="form-group">
                <label class="form-label" for="phoneNumber">
                  <i class="fas fa-phone me-2"></i>Phone Number
                </label>
                <input name="phoneNumber" type="tel" id="phoneNumber" class="form-control modern-input" 
                       value="<%= resident.phoneNumber %>" required>
              </div>
            </div>
            
            <!-- Property Information -->
            <div class="mb-4">
              <h6 class="text-muted mb-3">
                <i class="fas fa-home me-2"></i>Property Information
              </h6>
              
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="form-label" for="flatNumber">
                      <i class="fas fa-door-open me-2"></i>Flat Number
                    </label>
                    <input name="flatNumber" type="text" id="flatNumber" class="form-control modern-input" 
                           value="<%= resident.flatNumber %>" required>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="form-label" for="squareFeet">
                      <i class="fas fa-ruler-combined me-2"></i>Area (sq ft)
                    </label>
                    <input name="squareFeet" type="number" id="squareFeet" class="form-control modern-input" 
                           value="<%= resident.squareFeet %>" min="1" required>
                  </div>
                </div>
              </div>
            </div>
            
            <% if(resident.isAdmin) { %>
            <!-- Society Information (Admin Only) -->
            <div class="mb-4">
              <h6 class="text-muted mb-3">
                <i class="fas fa-building me-2"></i>Society Information
                <span class="badge bg-warning text-dark ms-2">Admin Only</span>
              </h6>
              
              <div class="form-group mb-3">
                <label class="form-label" for="address">
                  <i class="fas fa-map-marker-alt me-2"></i>Society Address
                </label>
                <input name="address" type="text" id="address" class="form-control modern-input" 
                       value="<%= society.societyAddress.address %>" required>
              </div>
              
              <div class="row g-3">
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="form-label" for="city">
                      <i class="fas fa-city me-2"></i>City
                    </label>
                    <input name="city" type="text" id="city" class="form-control modern-input" 
                           value="<%= society.societyAddress.city %>" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="form-label" for="district">
                      <i class="fas fa-map me-2"></i>District
                    </label>
                    <input name="district" type="text" id="district" class="form-control modern-input" 
                           value="<%= society.societyAddress.district %>" required>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label class="form-label" for="postalCode">
                      <i class="fas fa-mail-bulk me-2"></i>Postal Code
                    </label>
                    <input name="postalCode" type="text" id="postalCode" class="form-control modern-input" 
                           value="<%= society.societyAddress.postalCode %>" pattern="[0-9]{6}" required>
                  </div>
                </div>
              </div>
            </div>
            <% } %>
            
            <!-- Action Buttons -->
            <div class="d-flex gap-3 justify-content-end pt-3 border-top">
              <a href="/profile" class="btn btn-modern-secondary">
                <i class="fas fa-times me-1"></i>Cancel
              </a>
              <button type="submit" class="btn btn-modern-primary" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                <i class="fas fa-save me-1"></i>Save Changes
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
